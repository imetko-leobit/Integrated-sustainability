<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GSAP Text Pin Animation</title>
</head>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 50px;
    line-height: 1.6;
  }

  .trigger {
    font-size: 3rem;
    color: #000;
    height: 200vh;
    overflow: hidden;
  }

  .word {
    display: inline-block;
    white-space: nowrap; /* Prevents line breaks within words */
  }

  .char {
    display: inline-block;
    transform: translateY(100%);
    opacity: 0;
    white-space: pre; /* Preserves spaces */
  }
</style>
<body>
<div class="trigger">
  <div class="text">Text animation with GSAP only for large text lorem ipsum</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const textElement = document.querySelector('.text');
    const textContent = textElement.textContent;

    // Split text into words
    textElement.innerHTML = textContent.split(" ").map(word => {
      // Split each word into letters
      const letters = word.split("").map(letter => `<span class="char">${letter}</span>`).join("");
      return `<span class="word">${letters}&nbsp;</span>`; // Wrap the word and add a space
    }).join("");

    // Animation
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: ".trigger",
        start: "top top", // Start when the top of the trigger reaches the top of the viewport
        end: "+=300vh", // Pin for 300vh
        scrub: true, // Sync animation with scroll
        pin: true, // Pin the section
        anticipatePin: 1
      }
    });

    tl.to(".char", {
      y: 0,
      opacity: 1,
      stagger: {
        each: 0.05,
        from: "start"
      },
      duration: 0.5,
      ease: "power2.out",
    });

    // Responsiveness without page reload
    window.addEventListener("resize", () => {
      ScrollTrigger.refresh();
    });
  });
</script>
</body>
</html>
