(()=>{function e(e){var t=e.container,l=e.label,n=e.options;t&&(this.container=t,this.labelText=l,this.options=n,this._render(),this._attachEvents())}e.prototype._render=function(){this.originalSelect=this.container.querySelector("select"),this.showSelectAll="true"===this.container.getAttribute("data-select-all");var e='<div class="dropdown">';this.showSelectAll&&(e+='<div class="dropdown-item" data-checkbox="selectAll"><div class="checkbox-wrapper"><input type="checkbox" id="selectAll"/><span class="checkmark"></span></div><label>Select All</label></div>'),this.options.forEach((function(t){e+='<div class="dropdown-item" data-checkbox="'+t.id+'"><div class="checkbox-wrapper"><input type="checkbox" class="option-checkbox" id="'+t.id+'" /><span class="checkmark"></span></div><label>'+t.name+"</label></div>"})),e+="</div>";var t='<div class="select-label"><span>'+this.labelText+'</span><span style="display:flex; align-items:center;"><span class="count" style="display:none">0</span><span class="arrow">&#9013;</span></span></div>'+e,l=document.createElement("div");l.className="multiselect-ui",l.innerHTML=t,this.container.appendChild(l),this.labelEl=this.container.querySelector(".select-label"),this.countEl=this.labelEl.querySelector(".count"),this.dropdownEl=this.container.querySelector(".dropdown"),this.selectAllEl=this.container.querySelector("#selectAll"),this.optionEls=Array.from(this.container.querySelectorAll(".option-checkbox")),this.itemsEl=Array.from(this.container.querySelectorAll(".dropdown-item"))},e.prototype._attachEvents=function(){var e=this;this.labelEl.addEventListener("click",(function(){e.labelEl.classList.toggle("open"),e.dropdownEl.classList.toggle("open")})),this.itemsEl.forEach((function(e){e.addEventListener("click",(function(t){if("INPUT"!==t.target.tagName){var l=e.querySelector('input[type="checkbox"]');l.checked=!l.checked,l.dispatchEvent(new Event("change"))}}))})),this.optionEls.forEach((function(t){t.addEventListener("change",(function(){if(e.originalSelect){var l=e.originalSelect.querySelector('option[value="'+t.id+'"]');l&&(l.selected=t.checked,e.originalSelect.dispatchEvent(new Event("change",{bubbles:!0})))}e.selectAllEl&&(e.selectAllEl.checked=e.optionEls.every((function(e){return e.checked}))),e._updateCount()}))})),this.selectAllEl&&this.selectAllEl.addEventListener("change",(function(){var t=e.selectAllEl.checked;e.optionEls.forEach((function(e){e.checked!==t&&(e.checked=t,e.dispatchEvent(new Event("change")))}))})),document.addEventListener("click",(function(t){e.container.contains(t.target)||e.dropdownEl.classList.remove("open")}))},e.prototype._updateCount=function(){var e=this.optionEls.filter((function(e){return e.checked})).length;e>0?(this.countEl.textContent=e,this.countEl.style.display="inline"):this.countEl.style.display="none"},document.querySelectorAll(".js-custom-multiselect").forEach((function(t){var l=t.querySelector("select");if(l){Array.from(l.options).forEach((function(e){return e.selected=!1}));var n=t.getAttribute("data-label")||"Select",c=[];l.querySelectorAll("option").forEach((function(e){c.push({id:e.value,name:e.textContent})})),l.style.display="none",new e({container:t,label:n,options:c})}}))})();