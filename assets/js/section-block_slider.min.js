document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".js-pillar-carousel"),r=document.querySelector(".js-pillar-prev"),t=document.querySelector(".js-pillar-next");if(e){var n,a,i,l=Array.from(e.querySelectorAll(".pillar-carousel-card")),o=5e3,c=!1,s=!1,u=!1,d=0,v=function(){l.forEach((function(e){var r=e.querySelector(".js-timebar");r&&(r.style.transition="none",r.style.width="0%")})),d=0},f=function(){var e,r=null===(e=y())||void 0===e?void 0:e.querySelector(".js-timebar");if(r&&s){var t=(d=Date.now()-a)/o*100;r.style.transition="none",r.style.width="".concat(t,"%")}clearInterval(n)},y=function(){return e.querySelector(".pillar-carousel-card:first-child")},h=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearInterval(n),v();var t=-1;if(l.forEach((function(e,r){"0"===e.dataset.index&&(t=r)})),t>0)for(var a=0;a<t;a++){var i=e.querySelector(".pillar-carousel-card:first-child");e.appendChild(i)}e.style.transition="none",e.style.transform="translateX(0)",l=Array.from(e.querySelectorAll(".pillar-carousel-card")),r&&m(s)},p=function(r){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!c){c=!0,t||(u=!0,i&&i.unobserve(e),f()),clearInterval(n),v();var a,o=e.querySelector(".pillar-carousel-card.is-active");"next"===r?(a=o?o.nextElementSibling:null)||(a=e.querySelector(".pillar-carousel-card:first-child")):(a=o?o.previousElementSibling:null)||(a=e.querySelector(".pillar-carousel-card:last-child")),o&&o.classList.remove("is-active"),a&&a.classList.add("is-active");var s=l[0].offsetWidth,d="next"===r?-(s+40):s+40;e.style.transition="transform ".concat(.5,"s cubic-bezier(0.25, 0.46, 0.45, 0.94)"),e.style.transform="translateX(".concat(d,"px)"),setTimeout((function(){e.style.transition="none",e.style.transform="translateX(0)";var n=e.querySelector(".pillar-carousel-card:first-child");if("next"===r)e.appendChild(n);else{var a=e.querySelector(".pillar-carousel-card:last-child");e.prepend(a)}l=Array.from(e.querySelectorAll(".pillar-carousel-card")),m(!0),c=!1,t||(u=!1,i&&i.observe(e))}),500)}},m=function(e){l.forEach((function(e){return e.classList.remove("is-active")}));var r,t=y();if(t){t.classList.add("is-active");var n=t.querySelector(".js-timebar");e&&n&&s&&(r=n,d=0,a=Date.now(),setTimeout((function(){r.style.transition="width ".concat(5,"s linear"),r.style.width="100%"}),50),S())}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;clearInterval(n),n=setInterval((function(){p("next",!0)}),e)};r.addEventListener("click",(function(){return p("prev",!1)})),t.addEventListener("click",(function(){return p("next",!1)})),i=new IntersectionObserver((function(e){e.forEach((function(e){u||(e.isIntersecting?s||(s=!0,h(),m(!0)):s&&(s=!1,h()))}))}),{root:null,rootMargin:"0px",threshold:.1}),h(),i.observe(e),e.addEventListener("mouseenter",(function(){s&&!c&&f()})),e.addEventListener("mouseleave",(function(){s&&!c&&function(){var e,r=null===(e=y())||void 0===e?void 0:e.querySelector(".js-timebar");if(r&&s&&d>0){var t=o-d;if(t<=50)return void p("next",!0);setTimeout((function(){r.style.transition="width ".concat(t/1e3,"s linear"),r.style.width="100%"}),50),a=Date.now()-d,S(t)}else s&&S()}()}));var q=0,E=0;e.addEventListener("touchstart",(function(e){q=e.changedTouches[0].screenX}),{passive:!0}),e.addEventListener("touchend",(function(e){(E=e.changedTouches[0].screenX)<q-50&&p("next",!1),E>q+50&&p("prev",!1)}),{passive:!0})}}));