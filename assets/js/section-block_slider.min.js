document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".js-pillar-carousel"),t=document.querySelector(".js-pillar-prev"),r=document.querySelector(".js-pillar-next");if(e){var n,a,i,o=Array.from(e.querySelectorAll(".pillar-carousel-card")),l=5e3,c=!1,s=!1,u=!1,d=0,v=function(){o.forEach((function(e){var t=e.querySelector(".js-timebar");t&&(t.style.transition="none",t.style.width="0%")})),d=0},f=function(){var e,t=null===(e=y())||void 0===e?void 0:e.querySelector(".js-timebar");if(t&&s){var r=(d=Date.now()-a)/l*100;t.style.transition="none",t.style.width="".concat(r,"%")}clearInterval(n)},y=function(){return e.querySelector(".pillar-carousel-card:first-child")},h=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearInterval(n),v();var r=-1;if(o.forEach((function(e,t){"0"===e.dataset.index&&(r=t)})),r>0)for(var a=0;a<r;a++){var i=e.querySelector(".pillar-carousel-card:first-child");e.appendChild(i)}e.style.transition="none",e.style.transform="translateX(0)",o=Array.from(e.querySelectorAll(".pillar-carousel-card")),t&&m(s)},p=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!c){c=!0,r||(u=!0,i&&i.unobserve(e),f()),clearInterval(n),v();var a=o[0].offsetWidth,l="next"===t?-(a+40):a+40;e.style.transition="transform ".concat(.5,"s cubic-bezier(0.25, 0.46, 0.45, 0.94)"),e.style.transform="translateX(".concat(l,"px)"),setTimeout((function(){e.style.transition="none",e.style.transform="translateX(0)";var n=e.querySelector(".pillar-carousel-card:first-child");if("next"===t)e.appendChild(n);else{var a=e.querySelector(".pillar-carousel-card:last-child");e.prepend(a)}o=Array.from(e.querySelectorAll(".pillar-carousel-card")),m(!0),c=!1,r||(u=!1,i&&i.observe(e))}),500)}},m=function(e){o.forEach((function(e){return e.classList.remove("is-active")}));var t,r=y();if(r){r.classList.add("is-active");var n=r.querySelector(".js-timebar");e&&n&&s&&(t=n,d=0,a=Date.now(),setTimeout((function(){t.style.transition="width ".concat(5,"s linear"),t.style.width="100%"}),50),q())}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;clearInterval(n),n=setInterval((function(){p("next",!0)}),e)};t.addEventListener("click",(function(){return p("prev",!1)})),r.addEventListener("click",(function(){return p("next",!1)})),i=new IntersectionObserver((function(e){e.forEach((function(e){u||(e.isIntersecting?s||(s=!0,h(),m(!0)):s&&(s=!1,h()))}))}),{root:null,rootMargin:"0px",threshold:.1}),h(),i.observe(e),e.addEventListener("mouseenter",(function(){s&&!c&&f()})),e.addEventListener("mouseleave",(function(){s&&!c&&function(){var e,t=null===(e=y())||void 0===e?void 0:e.querySelector(".js-timebar");if(t&&s&&d>0){var r=l-d;if(r<=50)return void p("next",!0);setTimeout((function(){t.style.transition="width ".concat(r/1e3,"s linear"),t.style.width="100%"}),50),a=Date.now()-d,q(r)}else s&&q()}()}));var S=0,E=0;e.addEventListener("touchstart",(function(e){S=e.changedTouches[0].screenX}),{passive:!0}),e.addEventListener("touchend",(function(e){(E=e.changedTouches[0].screenX)<S-50&&p("next",!1),E>S+50&&p("prev",!1)}),{passive:!0})}}));