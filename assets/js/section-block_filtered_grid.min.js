!function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".block-filtered-grid").forEach((function(e){!function(e){var t=e.querySelectorAll(".js-filter-select"),r=e.querySelector(".js-sort-select"),n=e.querySelector(".js-filter-chips"),a=e.querySelector(".js-filtered-grid"),i=e.querySelector(".js-no-results");if(a){var l=a.querySelectorAll(".block-filtered-grid__grid-item"),c={},d="";t.forEach((function(e){e.addEventListener("change",(function(){o(e)}))})),r&&r.addEventListener("change",(function(){u(r)}))}function o(e){var t=e.getAttribute("data-filter-name"),r=e.value;r?c[t]={value:r,label:e.options[e.selectedIndex].text}:delete c[t],s(),b()}function u(e){d=e.value,b()}function s(){if(n){for(;n.firstChild;)n.removeChild(n.firstChild);Object.keys(c).forEach((function(e){var t=f(e,c[e].label);n.appendChild(t)}))}}function f(e,t){var r=document.createElement("div");r.className="block-filtered-grid__chip";var n=document.createElement("span");n.className="block-filtered-grid__chip-label",n.textContent=t;var a=document.createElement("button");return a.className="block-filtered-grid__chip-remove",a.innerHTML="&times;",a.setAttribute("aria-label","Remove "+t+" filter"),a.addEventListener("click",(function(){v(e)})),r.appendChild(n),r.appendChild(a),r}function v(t){delete c[t];var r=e.querySelector('[data-filter-name="'+t+'"]');r&&(r.value=""),s(),b()}function b(){var e=0,t=Array.from(l);t.forEach((function(t){h(t)?(t.classList.remove("is-hidden"),e++):t.classList.add("is-hidden")})),d&&m(t),i&&(0===e&&Object.keys(c).length>0?i.style.display="block":i.style.display="none")}function h(e){if(0===Object.keys(c).length)return!0;for(var t in c){var r=c[t].value;if(e.getAttribute("data-"+t)!==r)return!1}return!0}function m(e){var t=e.filter((function(e){return!e.classList.contains("is-hidden")}));t.sort((function(e,t){switch(d){case"name-asc":return e.getAttribute("data-title").localeCompare(t.getAttribute("data-title"));case"name-desc":return t.getAttribute("data-title").localeCompare(e.getAttribute("data-title"));case"date-new":return new Date(t.getAttribute("data-date"))-new Date(e.getAttribute("data-date"));case"date-old":return new Date(e.getAttribute("data-date"))-new Date(t.getAttribute("data-date"));default:return 0}})),t.forEach((function(e){a.appendChild(e)}))}}(e)}))}))}();