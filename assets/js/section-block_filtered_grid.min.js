!function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".block-filtered-grid").forEach((function(e){!function(e){var t=e.querySelectorAll(".js-filter-select"),n=e.querySelector(".js-sort-select"),r=e.querySelector(".js-filter-chips"),a=e.querySelector(".js-filtered-grid"),i=a.querySelectorAll(".block-filtered-grid__grid-item"),l=e.querySelector(".js-no-results"),c={},d="";function o(e){var t=e.getAttribute("data-filter-name"),n=e.value;n?c[t]={value:n,label:e.options[e.selectedIndex].text}:delete c[t],s(),v()}function u(e){d=e.value,v()}function s(){r&&(r.innerHTML="",Object.keys(c).forEach((function(e){var t=f(e,c[e].label);r.appendChild(t)})))}function f(e,t){var n=document.createElement("div");n.className="block-filtered-grid__chip";var r=document.createElement("span");r.className="block-filtered-grid__chip-label",r.textContent=t;var a=document.createElement("button");return a.className="block-filtered-grid__chip-remove",a.innerHTML="&times;",a.setAttribute("aria-label","Remove "+t+" filter"),a.addEventListener("click",(function(){b(e)})),n.appendChild(r),n.appendChild(a),n}function b(t){delete c[t];var n=e.querySelector('[data-filter-name="'+t+'"]');n&&(n.value=""),s(),v()}function v(){var e=0,t=Array.from(i);t.forEach((function(t){m(t)?(t.classList.remove("is-hidden"),e++):t.classList.add("is-hidden")})),d&&g(t),l&&(0===e&&Object.keys(c).length>0?l.style.display="block":l.style.display="none")}function m(e){if(0===Object.keys(c).length)return!0;for(var t in c){var n=c[t].value;if(e.getAttribute("data-"+t)!==n)return!1}return!0}function g(e){var t=e.filter((function(e){return!e.classList.contains("is-hidden")}));t.sort((function(e,t){switch(d){case"name-asc":return e.getAttribute("data-title").localeCompare(t.getAttribute("data-title"));case"name-desc":return t.getAttribute("data-title").localeCompare(e.getAttribute("data-title"));case"date-new":return new Date(t.getAttribute("data-date"))-new Date(e.getAttribute("data-date"));case"date-old":return new Date(e.getAttribute("data-date"))-new Date(t.getAttribute("data-date"));default:return 0}})),t.forEach((function(e){a.appendChild(e)}))}t.forEach((function(e){e.addEventListener("change",(function(){o(e)}))})),n&&n.addEventListener("change",(function(){u(n)}))}(e)}))}))}();