!function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".block-filtered-grid").forEach((function(e){!function(e){var t=e.querySelectorAll(".js-filter-select"),n=e.querySelector(".js-sort-select"),r=e.querySelector(".js-filter-chips"),i=r?r.closest(".block-filtered-grid__filter-section"):null,a=e.querySelector(".js-filtered-grid"),l=e.querySelector(".js-no-results");if(a){var c=a.querySelectorAll(".block-filtered-grid__grid-item"),d={},o="";t.forEach((function(e){e.addEventListener("change",(function(){u(e)}))})),n&&n.addEventListener("change",(function(){s(n)})),m()}function u(e){var t=e.getAttribute("data-filter-name"),n=e.value;n?d[t]={value:n,label:e.options[e.selectedIndex].text}:delete d[t],f(),g()}function s(e){o=e.value,g()}function f(){if(r){for(;r.firstChild;)r.removeChild(r.firstChild);Object.keys(d).forEach((function(e){var t=v(e,d[e].label);r.appendChild(t)})),m()}}function v(e,t){var n=document.createElement("div");n.className="block-filtered-grid__chip btn--gradient",n.dataset.filterName=e;var r=document.createElement("span");r.className="block-filtered-grid__chip-label",r.textContent=t;var i=document.createElement("button");return i.className="block-filtered-grid__chip-remove",i.innerHTML="&times;",i.setAttribute("aria-label","Remove "+t+" filter"),i.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),b(e)})),n.appendChild(r),n.appendChild(i),n.addEventListener("click",(function(){b(e)})),n}function b(t){delete d[t];var n=e.querySelector('[data-filter-name="'+t+'"]');n&&(n.value=""),f(),g()}function m(){if(i){var e=Object.keys(d).length>0;i.style.display=e?"":"none"}}function g(){var e=0,t=Array.from(c);t.forEach((function(t){h(t)?(t.classList.remove("is-hidden"),e++):t.classList.add("is-hidden")})),o&&p(t),l&&(0===e&&Object.keys(d).length>0?l.style.display="block":l.style.display="none")}function h(e){if(0===Object.keys(d).length)return!0;for(var t in d){var n=d[t].value;if(!(e.getAttribute("data-"+t)||"").split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})).includes(n))return!1}return!0}function p(e){var t=e.filter((function(e){return!e.classList.contains("is-hidden")}));t.sort((function(e,t){switch(o){case"name-asc":return e.getAttribute("data-title").localeCompare(t.getAttribute("data-title"));case"name-desc":return t.getAttribute("data-title").localeCompare(e.getAttribute("data-title"));case"date-new":return new Date(t.getAttribute("data-date"))-new Date(e.getAttribute("data-date"));case"date-old":return new Date(e.getAttribute("data-date"))-new Date(t.getAttribute("data-date"));default:return 0}})),t.forEach((function(e){a.appendChild(e)}))}}(e)}))}))}();